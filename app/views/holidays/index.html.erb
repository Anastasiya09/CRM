<%= content_for(:custom_scripts) do %>
  <%= javascript_include_tag 'fullcalendar.min.js' %>
<% end %>
<div class="row content">
  <div class="container-fluid">
    <div id="calendar_holiday">
    </div>
    <div id="list-month">
      <% @hash_holidays["month"].each_with_index do |item, i| %>
        <%= Date::MONTHNAMES[i] %> <%= item %> <br/>
      <% end %>
    </div>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    var
      data_for_events = JSON.parse('<%= raw @hash_holidays[:holidays].to_json %>');
    $('#calendar_holiday').fullCalendar({
      firstDay: 1,
      events: data_for_events,
      dayClick: function(date, allDay, jsEvent, view) {
        var myEvent = {
          title:"Holiday",
          allDay: true,
          start: date.format()
        };
        $('#calendar_holiday').fullCalendar( 'renderEvent', myEvent );
        $( "#list-month" ).load( "holidays/update_list_events",
          {
            date: myEvent.start,
            title: myEvent.title
          }
        );
      },
    })
  });
</script>
